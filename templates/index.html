{% extends "layout.html" %}
{% block content %}
  <h2>Available Items</h2>

  {% if items and items|length > 0 %}
    <div class="items">
      {% for item in items %}
        <article class="item-card">
          {% if item['image_filename'] %}
            <a href="{{ url_for('item_detail', item_id=item['id']) }}">
              <img class="thumb" src="{{ url_for('static', filename='uploads/' ~ item['image_filename']) }}" alt="{{ item['name'] }}" loading="lazy">
            </a>
          {% endif %}
          <header>
            <h3><a href="{{ url_for('item_detail', item_id=item['id']) }}">{{ item['name'] }}</a></h3>
            <small class="date">{{ item['date_found'] or '—' }}</small>
          </header>
          <p class="muted">{{ item['location'] or 'Location unknown' }}</p>
          {% if item['description'] %}
            <p>{{ item['description'][:140] }}{% if item['description']|length > 140 %}…{% endif %}</p>
          {% endif %}
          <footer>
            <a class="btn" href="{{ url_for('item_detail', item_id=item['id']) }}">View details</a>
          </footer>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">No items available. Be the first to <a href="{{ url_for('report') }}">report an item</a>!</p>
  {% endif %}
{% endblock %}
